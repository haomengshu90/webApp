function Location(){}Location.prototype.getLocation=function(c){var b={enableHighAccuracy:true,maximumAge:1000};this.callback=Object.prototype.toString.call(c)=="[object Function]"?c:function(d){alert(d.province+d.city);console.log("getocation(callbackFunction) å¯è·å¾—å®šä½ä¿¡æ¯å¯¹è±?")};var a=this;if(navigator.geolocation){navigator.geolocation.getCurrentPosition(function(d){var e=d.coords.longitude;var f=d.coords.latitude;a.loadMapApi(e,f)},a.onError,b)}else{}};Location.prototype.loadMapApi=function(d,e){var a=this;var c=document.getElementsByTagName("HEAD").item(0);var b=document.createElement("script");b.type="text/javascript";b.src="http://api.map.baidu.com/getscript?v=2.0&ak=A396783ee700cfdb9ba1df281ce36862&services=&t=20140930184510";c.appendChild(b);b.onload=function(g){var f=new BMap.Point(d,e);var h=new BMap.Geocoder();h.getLocation(f,function(i){var j=i.addressComponents;a.callback(j)})}};Location.prototype.onError=function(a){switch(a.code){case 1:alert("ä½ç½®æœåŠ¡è¢«æ‹’ç»?");break;case 2:alert("æš‚æ—¶è·å–ä¸åˆ°ä½ç½®ä¿¡æ¯");break;case 3:alert("è·å–ä¿¡æ¯è¶…æ—¶");break;case 4:alert("æœªçŸ¥é”™è¯¯");break}};var local=new Location();local.getLocation(function(b){console.log(b);var a=JSON.stringify(b);alert(a)});